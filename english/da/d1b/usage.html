<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LedController: How to use this library</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LedController
   &#160;<span id="projectnumber">2.0.2</span>
   </div>
   <div id="projectbrief">A library for the MAX7219 and the MAX7221 Led display drivers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/d1b/usage.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How to use this library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Check the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> for more infomation about its functions or look for the <a href="../../examples.html">Examples</a>.</b></p>
<p>This page shows you the basic usage of the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> and what you can do with it.</p>
<h1><a class="anchor" id="init_lib"></a>
Initilizing the Library</h1>
<p>You can initilize the library in two ways: with hardware SPI or with software SPI.</p>
<ol type="1">
<li>Hardware SPI is at least 10 times faster but you can only use specific pins for some signals (look <a href="../../index.html">here</a> for which pins).</li>
<li>Software SPI is slower (which only mattesrs if you need really tight timings) but you can freely choose which (free) pins you want to use.</li>
</ol>
<h2><a class="anchor" id="SPI_intro"></a>
Small introduction to SPI</h2>
<p>The Serial Peripheral Interface (SPI) is a synchronous serial communication interface specification used for short-distance communication, primarily in embedded systems. In this case your microcontroller is the master which controls the slave (at least one 7-Segment display or led matrix).</p>
<p>The master has three significant pins: SCLK(Serial Clock), MOSI(Master Out Slave In), SS(Slave Select). The slave also has tree needed pins (and two for power(GND and VCC)): CLK(Clock), DIN(Data In), CS(Ship Select). SCLK has to be connected to CLK and MOSI to DIN. These signals can be shared by multiple SPI slaves even if they have nothing to do with each other. SS has to be connected to CS and each Slave has its own SS pin(which can be any free pin).</p>
<h1><a class="anchor" id="getting_started"></a>
Getting started</h1>
<p>To get started you need to first create a new <a class="el" href="../../d0/d17/classsakurajin_1_1controller__configuration.html" title="This class is used to handle the configuration of the sakurajin::LedController.">sakurajin::controller_configuration</a> object. This is used to configure the setup of the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> which can get complex. <a class="el" href="../../d0/d17/classsakurajin_1_1controller__configuration.html" title="This class is used to handle the configuration of the sakurajin::LedController.">sakurajin::controller_configuration</a> has no constructor and is more like an struct with methods than it is a 'real' class. Because it is a template you need to know the dimension of your Matrix which causes the type to be <code><a class="el" href="../../d0/d17/classsakurajin_1_1controller__configuration.html" title="This class is used to handle the configuration of the sakurajin::LedController.">sakurajin::controller_configuration</a>&lt;sements_x,segments_y&gt;</code>. To see how you can use more than one row with the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> go <a class="el" href="../../dd/d36/multi_row.html">here</a>. The rest of the example will use <code><a class="el" href="../../d0/d17/classsakurajin_1_1controller__configuration.html" title="This class is used to handle the configuration of the sakurajin::LedController.">sakurajin::controller_configuration</a>&lt;4,1&gt;</code> like in the <a class="el" href="../../d2/d7f/_led-matrix-rocket_8ino-example.html">rocket example</a>.</p>
<p>If you want to use Hardware Spi set useHardwareSpi to true, otherwise set it to false. If you use hardware SPI you only need to specify the CS pin, if not you also need to CLK and MOSI pins. Just assign the wanted values to SPI_CS, SPI_CLK and SPI_MOSI.</p>
<p>Now you can check if the configuration is Valid by calling the <a class="el" href="../../d0/d17/classsakurajin_1_1controller__configuration.html#a75b1ea5dd184dab5686ba3872183f8ea" title="check of this configuration is valid">sakurajin::controller_configuration.isValid()</a> method. If it returns true, you can continue with the next step, if not try setting debug_output and figure out what went wrong.</p>
<p>Now that you have a valid configuration, you can pass it to the init function of a <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> object. You can use the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html#a1d0bc6e8cdb09c42fd6bd2fd06374124" title="Set one Row of one segment.">sakurajin::LedController.setRow</a> and sakurajin::LedController.setSegment to send data to the LedMatrix.</p>
<p><a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html#a1d0bc6e8cdb09c42fd6bd2fd06374124" title="Set one Row of one segment.">sakurajin::LedController.setRow</a> sets a specific Row of a given segment to a given byte. It needs the segment index which can be calculated from the segment coordinates by calling <code>lc.getConfig().getSegmentNumber(x,y)</code>.</p>
<p>sakurajin::LedController.setSegment sets a whole segment but the segment can be specified through coordinates or the index.</p>
<p>The following snippet is (probably working) sample code that initilizes a <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> using Hardware spi and sets some segments using <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html#a1d0bc6e8cdb09c42fd6bd2fd06374124" title="Set one Row of one segment.">sakurajin::LedController.setRow</a> and sakurajin::LedController.setSegment.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;sakurajin::LedController.hpp&quot;</span></div>
<div class="line"><span class="keyword">auto</span> lc = <a class="code" href="../../d6/df8/classsakurajin_1_1_led_controller.html">sakurajin::LedController&lt;4,1&gt;</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup(){</div>
<div class="line">    <span class="keyword">auto</span> conf = <a class="code" href="../../d0/d17/classsakurajin_1_1controller__configuration.html">sakurajin::controller_configuration&lt;4,1&gt;</a>();</div>
<div class="line">    conf.<a class="code" href="../../d0/d17/classsakurajin_1_1controller__configuration.html#a9faea9cf858e4222c6d9c5b7fe4acfc3">useHardwareSpi</a> = <span class="keyword">true</span>;</div>
<div class="line">    conf.<a class="code" href="../../d0/d17/classsakurajin_1_1controller__configuration.html#a04cb0d8d4e95440fe5b780141bcf4cfc">SPI_CS</a> = 25;</div>
<div class="line"> </div>
<div class="line">    lc.init(conf);</div>
<div class="line"> </div>
<div class="line">    lc.setRow(lc.getConfig().getSegmentNumber(0,1),2,0xAA);</div>
<div class="line">    lc.setSegment(lc.getConfig().getSegmentNumber(1,1),{0x00,0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F});</div>
<div class="line">    lc.setSegment(2,1,{0x7F,0x3F,0x1F,0x0F,0x07,0x03,0x01,0x00});</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop(){</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="what_after_intro"></a>
What is next?</h1>
<p>Now that you know how to use the <a class="el" href="../../d6/df8/classsakurajin_1_1_led_controller.html" title="This class provied a control interface for MAX7219 and MAX7221 Led display drivers.">sakurajin::LedController</a> you can check the more advanced features like <a class="el" href="../../dd/d36/multi_row.html">using multiple rows</a> or <a class="el" href="../../df/d3a/movement.html">moving the displayed data</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclasssakurajin_1_1controller__configuration_html_a9faea9cf858e4222c6d9c5b7fe4acfc3"><div class="ttname"><a href="../../d0/d17/classsakurajin_1_1controller__configuration.html#a9faea9cf858e4222c6d9c5b7fe4acfc3">sakurajin::controller_configuration::useHardwareSpi</a></div><div class="ttdeci">bool useHardwareSpi</div><div class="ttdoc">true if you want to use hardware SPI (view https://www.arduino.cc/en/Reference/SPI for pin config).</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_led_controller__config_8hpp_source.html#l00078">LedController_config.hpp:78</a></div></div>
<div class="ttc" id="aclasssakurajin_1_1controller__configuration_html"><div class="ttname"><a href="../../d0/d17/classsakurajin_1_1controller__configuration.html">sakurajin::controller_configuration</a></div><div class="ttdoc">This class is used to handle the configuration of the sakurajin::LedController.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_led_controller__config_8hpp_source.html#l00031">LedController_config.hpp:31</a></div></div>
<div class="ttc" id="aclasssakurajin_1_1controller__configuration_html_a04cb0d8d4e95440fe5b780141bcf4cfc"><div class="ttname"><a href="../../d0/d17/classsakurajin_1_1controller__configuration.html#a04cb0d8d4e95440fe5b780141bcf4cfc">sakurajin::controller_configuration::SPI_CS</a></div><div class="ttdeci">unsigned int SPI_CS</div><div class="ttdoc">The pin for the chip select signal (CS).</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/_led_controller__config_8hpp_source.html#l00054">LedController_config.hpp:54</a></div></div>
<div class="ttc" id="aclasssakurajin_1_1_led_controller_html"><div class="ttname"><a href="../../d6/df8/classsakurajin_1_1_led_controller.html">sakurajin::LedController</a></div><div class="ttdoc">This class provied a control interface for MAX7219 and MAX7221 Led display drivers.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/_led_controller__template_8hpp_source.html#l00040">LedController_template.hpp:40</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
